<!DOCTYPE html>
<html>
<head>
    <title>Email Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Email Form</h1>
    <form id="emailForm">
        <label for="to">To:</label>
        <input type="email" id="to" name="to" required><br><br>
        
        <label for="subject">Subject:</label>
        <input type="text" id="subject" name="subject" required><br><br>
        
        <label for="message">Message:</label><br>
        <textarea id="message" name="message" rows="5" required></textarea><br><br>
        
        <input type="submit" value="Send Email">
    </form>

    <script>
        $(document).ready(function() {
            $("#emailForm").submit(function(event) {
                event.preventDefault();
                
                const emailData = {
                    to: $("#to").val(),
                    subject: $("#subject").val(),
                    text: $("#message").val()
                };

                $.ajax({
                    type: "POST",
                    url: "/send-email",
                    contentType: "application/json",
                    data: JSON.stringify(emailData),
                    success: function(data) {
                        if (data.success) {
                            alert("Email sent successfully!");
                        } else {
                            alert("Failed to send email. Please try again.");
                        }
                    },
                    error: function(error) {
                        console.error(error);
                        alert("An error occurred while sending the email.");
                    }
                });
            });
        });
    </script>
</body>
</html>
